<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Introduction to PxWebApiData • PxWebApiData</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Introduction to PxWebApiData">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">PxWebApiData</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/Introduction.html">Introduction to PxWebApiData</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/statisticsnorway/ssb-pxwebapidata/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Introduction to PxWebApiData</h1>
                        <h4 data-toc-skip class="author">Øyvind
Langsrud, Jan Bruusgaard, Solveig Bjørkholt and Susie Jentoft</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/statisticsnorway/ssb-pxwebapidata/blob/master/vignettes/Introduction.Rmd" class="external-link"><code>vignettes/Introduction.Rmd</code></a></small>
      <div class="d-none name"><code>Introduction.Rmd</code></div>
    </div>

    
    
<div class="section level3">
<h3 id="preface">Preface<a class="anchor" aria-label="anchor" href="#preface"></a>
</h3>
<p>An introduction to the R-package PxWebApiData is given below. Six
calls to the main function, <code>ApiData</code>, are demonstrated.
First, two calls for reading data sets are shown. The third call
captures meta data. However, in practise, one may look at the meta data
first. Then three more examples and some background is given.</p>
<p>Note: Earlier versions of this vignette demonstrated <em>“readymade
datasets by GetApiData”</em>. As Statistics Norway will remove the
readymade API during 2025, these examples are now replaced. The new
<em>PxWebApi 2</em> is now the primary API for Statistics Norway. See
the section <em>“PxWebApi 2 examples with GetApiData”</em> below.</p>
</div>
<div class="section level2">
<h2 id="specification-by-variable-indices-and-variable-ids">Specification by variable indices and variable id’s<a class="anchor" aria-label="anchor" href="#specification-by-variable-indices-and-variable-ids"></a>
</h2>
<p>The dataset below has three variables, Region, ContentsCode and Tid.
The variables can be used as input parameters. Here two of the
parameters are specified by variable id’s and one parameter is specified
by indices. Negative values are used to specify reversed indices. Thus,
we here obtain the two first and the two last years in the data.</p>
<p>A list of two data frames is returned; the label version and the id
version.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/ApiData.html">ApiData</a></span><span class="op">(</span><span class="st">"http://data.ssb.no/api/v0/en/table/04861"</span>,</span>
<span>        Region <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"1103"</span>, <span class="st">"0301"</span><span class="op">)</span>, ContentsCode <span class="op">=</span> <span class="st">"Bosatte"</span>, Tid <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="op">-</span><span class="fl">2</span>, <span class="op">-</span><span class="fl">1</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code>$`04861: Area and population of urban settlements, by region, contents and year`
             region            contents year  value
1 Oslo municipality Number of residents 2000 504348
2 Oslo municipality Number of residents 2002 508134
3 Oslo municipality Number of residents 2023 705945
4 Oslo municipality Number of residents 2024 714630
5         Stavanger Number of residents 2000 106804
6         Stavanger Number of residents 2002 108271
7         Stavanger Number of residents 2023 140012
8         Stavanger Number of residents 2024 142897

$dataset
  Region ContentsCode  Tid  value
1   0301      Bosatte 2000 504348
2   0301      Bosatte 2002 508134
3   0301      Bosatte 2023 705945
4   0301      Bosatte 2024 714630
5   1103      Bosatte 2000 106804
6   1103      Bosatte 2002 108271
7   1103      Bosatte 2023 140012
8   1103      Bosatte 2024 142897</code></pre>
<p>To return a single dataset with only labels use the function
<code>ApiData1</code>. The function <code>Apidata2</code> returns only
id’s. To return a dataset with both labels and id’s in one dataframe use
<code>ApiData12</code>.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/ApiData.html">ApiData12</a></span><span class="op">(</span><span class="st">"http://data.ssb.no/api/v0/en/table/04861"</span>,</span>
<span>        Region <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"1103"</span>, <span class="st">"0301"</span><span class="op">)</span>, ContentsCode <span class="op">=</span> <span class="st">"Bosatte"</span>, Tid <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="op">-</span><span class="fl">2</span>, <span class="op">-</span><span class="fl">1</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code>No encoding supplied: defaulting to UTF-8.</code></pre>
<pre><code>No internet connection or resource not available: Error : parse error: premature EOF
                                       
                     (right here) ------^</code></pre>
<pre><code><span><span class="cn">NULL</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="specification-by-true-false-and-imaginary-values-e-g--3i-">Specification by TRUE, FALSE and imaginary values (e.g. 3i).<a class="anchor" aria-label="anchor" href="#specification-by-true-false-and-imaginary-values-e-g--3i-"></a>
</h2>
<p>All possible values is obtained by TRUE and corresponds to filter
<code>"all": "*"</code> in the api query. Elimination of a variable is
obtained by FALSE. An imaginary value corresponds to filter
<code>"top"</code> in the api query.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ApiData.html">ApiData</a></span><span class="op">(</span><span class="st">"http://data.ssb.no/api/v0/en/table/04861"</span>,</span>
<span>        Region <span class="op">=</span> <span class="cn">FALSE</span>, ContentsCode <span class="op">=</span> <span class="cn">TRUE</span>, Tid <span class="op">=</span> <span class="fl">3i</span><span class="op">)</span></span></code></pre></div>
<pre><code>Warning converted to message: cannot open URL 'https://data.ssb.no/api/v0/en/table/04861': HTTP status was '429 Unknown Error'</code></pre>
<pre><code>No internet connection or resource not available: Error in open.connection(con, "rb") : 
  cannot open the connection to 'http://data.ssb.no/api/v0/en/table/04861'</code></pre>
<p>To show either label version or id version</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span></span></code></pre></div>
<pre><code><span><span class="cn">NULL</span></span></code></pre>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span></span></code></pre></div>
<pre><code><span><span class="cn">NULL</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="show-additional-information">Show additional information<a class="anchor" aria-label="anchor" href="#show-additional-information"></a>
</h2>
<p><code>comment</code> list additional dataset information: Title,
latest update and source.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/comment.html" class="external-link">comment</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span></code></pre></div>
<pre><code>Warning in max(nchar(com)): no non-missing arguments to max; returning -Inf</code></pre>
</div>
<div class="section level2">
<h2 id="obtaining-meta-data">Obtaining meta data<a class="anchor" aria-label="anchor" href="#obtaining-meta-data"></a>
</h2>
<p>Meta information about the data set can be obtained by
<code>returnMetaFrames = TRUE</code>.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/ApiData.html">ApiData</a></span><span class="op">(</span><span class="st">"http://data.ssb.no/api/v0/en/table/04861"</span>,  returnMetaFrames <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<pre><code>Warning converted to message: cannot open URL 'https://data.ssb.no/api/v0/en/table/04861': HTTP status was '429 Unknown Error'</code></pre>
<pre><code>No internet connection or resource not available: Error in open.connection(con, "rb") : 
  cannot open the connection to 'http://data.ssb.no/api/v0/en/table/04861'</code></pre>
<pre><code><span><span class="cn">NULL</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="aggregations-using-filter-agg">Aggregations using filter <em>agg:</em><a class="anchor" aria-label="anchor" href="#aggregations-using-filter-agg"></a>
</h2>
<p>PxWebApi offers two more filters for groupings, <code>agg:</code> and
<code>vs:</code>. You can see these filters in the code “API Query for
this table” when you have made a table in PxWeb.</p>
<p><code>agg</code>: is used for readymade aggregation groupings.</p>
<p>This example shows the use of aggregation in age groups and
aggregated timeseries for the new Norwegian municipality structure from
2020. Also note the url where <code>/en</code> is replaced by
<code>/no</code>. That returns labels in Norwegian instead of in
English.</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/ApiData.html">ApiData</a></span><span class="op">(</span><span class="st">"http://data.ssb.no/api/v0/no/table/07459"</span>,</span>
<span>        Region <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"agg:KommSummer"</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"K-3101"</span>, <span class="st">"K-3103"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>        Tid <span class="op">=</span> <span class="fl">4i</span>,</span>
<span>        Alder <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"agg:TodeltGrupperingB"</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"H17"</span>, <span class="st">"H18"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>        Kjonn <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<pre><code>Warning converted to message: cannot open URL 'https://data.ssb.no/api/v0/no/table/07459': HTTP status was '429 Unknown Error'</code></pre>
<pre><code>No internet connection or resource not available: Error in open.connection(con, "rb") : 
  cannot open the connection to 'http://data.ssb.no/api/v0/no/table/07459'</code></pre>
<pre><code><span><span class="cn">NULL</span></span></code></pre>
<p>There are two limitations in the PxWebApi using these filters.</p>
<ol style="list-style-type: decimal">
<li>The name of the filter and the id’s are not shown in metadata, only
in the code “API Query for this table”.</li>
<li>The filters <code>agg:</code> and <code>vs:</code> can only take
single elements as input. Filter <code>"all":"*"</code> eg. TRUE, does
not work with agg: and vs:.</li>
</ol>
<p>The other filter <code>vs:</code>, specify the grouping value sets,
which is a part of the value pool. As it is only possible to give single
elements as input, it is easier to query the value pool. This means that
<code>vs:</code> is redundant.</p>
<p>In this example Region is the value pool and Fylker (counties) is the
value set. As <code>vs:Fylker</code> is redundant, both will return the
same:</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span>  <span class="va">Region</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"vs:Fylker"</span>,<span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"01"</span>,<span class="st">"02"</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="va">Region</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"01"</span>,<span class="st">"02"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="return-the-api-query-as-json">Return the API query as JSON<a class="anchor" aria-label="anchor" href="#return-the-api-query-as-json"></a>
</h2>
<p>In PxWebApi the original query is formulated as JSON. Using the
parameter returnApiQuery is useful for debugging.</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/ApiData.html">ApiData</a></span><span class="op">(</span><span class="st">"http://data.ssb.no/api/v0/en/table/04861"</span>,  returnApiQuery <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<pre><code>Warning converted to message: cannot open URL 'https://data.ssb.no/api/v0/en/table/04861': HTTP status was '429 Unknown Error'</code></pre>
<pre><code>No internet connection or resource not available: Error in open.connection(con, "rb") : 
  cannot open the connection to 'http://data.ssb.no/api/v0/en/table/04861'</code></pre>
<pre><code><span><span class="cn">NULL</span></span></code></pre>
<p>To convert an original JSON API query to a PxWebApiData query there
is also a simple webpage <a href="https://radbrt-px-converter-px-converter-3mdstf.streamlit.app" class="external-link">PxWebApiData
call creator</a>.</p>
</div>
<div class="section level2">
<h2 id="pxwebapi-2-examples-with-getapidata">PxWebApi 2 examples with GetApiData<a class="anchor" aria-label="anchor" href="#pxwebapi-2-examples-with-getapidata"></a>
</h2>
<p>Statistics Norway has announced that PxWebApi 2 is now the primary
API for Statbank Norway’s 7 500 public tables. This API supports GET
queries defined entirely in a URL.</p>
<p>Version 1 of PxWebApi will continue to exist in parallel for a period
of time, but only supports POST queries. The limited API with “readymade
datasets” will be removed during 2025, since PxWebApi 2 offers GET
queries.</p>
<p>The data is most easily retrieved with the <code>GetApiData</code>
function, which is the same as using the parameter
<code>getDataByGET = TRUE</code> in the <code>ApiData</code> function.
Corresponding wrapper functions <code>GetApiData1</code>,
<code>GetApiData2</code> and <code>GetApiData12</code> are available for
<code>ApiData1</code>, <code>ApiData2</code> and
<code>ApiData12</code>.</p>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Example dataset</span></span>
<span><span class="va">url1</span> <span class="op">&lt;-</span> <span class="st">"https://data.ssb.no/api/pxwebapi/v2/tables/05810/data?lang=en"</span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ApiData.html">ApiData</a></span><span class="op">(</span><span class="va">url1</span>, getDataByGET <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<pre><code>Not available - 429</code></pre>
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>    <span class="co"># Label version of the dataset</span></span></code></pre></div>
<pre><code><span><span class="cn">NULL</span></span></code></pre>
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/comment.html" class="external-link">comment</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span></code></pre></div>
<pre><code>Warning in max(nchar(com)): no non-missing arguments to max; returning -Inf</code></pre>
<div class="sourceCode" id="cb35"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># More specific query with selected dimensions</span></span>
<span><span class="va">url2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span></span>
<span>  <span class="st">"https://data.ssb.no/api/pxwebapi/v2/tables/03013/data?lang=en"</span>,</span>
<span>  <span class="st">"&amp;valueCodes[Konsumgrp]=??"</span>,</span>
<span>  <span class="st">"&amp;valueCodes[ContentsCode]=KpiIndMnd"</span>,</span>
<span>  <span class="st">"&amp;valueCodes[Tid]=top(2)"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">x2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ApiData.html">ApiData2</a></span><span class="op">(</span><span class="va">url2</span>, getDataByGET <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<pre><code>Not available - 429</code></pre>
<div class="sourceCode" id="cb37"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x2</span>  <span class="co"># id version of the dataset</span></span></code></pre></div>
<pre><code><span><span class="cn">NULL</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="eurostat-data">Eurostat data<a class="anchor" aria-label="anchor" href="#eurostat-data"></a>
</h2>
<p>Eurostat REST API offers JSON-stat version 2. It is possible to use
this package to obtain data from Eurostat by using
<code>GetApiData</code> or the similar functions with <code>1</code>,
<code>2</code> or <code>12</code> at the end</p>
<p>This example shows HICP total index, latest two periods for EU and
Norway. See <a href="https://wikis.ec.europa.eu/display/EUROSTATHELP/API+Statistics+-+data+query" class="external-link">Eurostat</a>
for more.</p>
<div class="sourceCode" id="cb39"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">urlEurostat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span>   <span class="co"># Here the long url is split into several lines using paste0 </span></span>
<span>  <span class="st">"https://ec.europa.eu/eurostat/api/dissemination/statistics/1.0/data/prc_hicp_mv12r"</span>, </span>
<span>  <span class="st">"?format=JSON&amp;lang=EN&amp;lastTimePeriod=2&amp;coicop=CP00&amp;geo=NO&amp;geo=EU"</span><span class="op">)</span></span>
<span><span class="va">urlEurostat</span></span></code></pre></div>
<pre><code>[1] "https://ec.europa.eu/eurostat/api/dissemination/statistics/1.0/data/prc_hicp_mv12r?format=JSON&amp;lang=EN&amp;lastTimePeriod=2&amp;coicop=CP00&amp;geo=NO&amp;geo=EU"</code></pre>
<div class="sourceCode" id="cb41"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/ApiData.html">GetApiData12</a></span><span class="op">(</span><span class="va">urlEurostat</span><span class="op">)</span></span></code></pre></div>
<pre><code>No encoding supplied: defaulting to UTF-8.</code></pre>
<pre><code>  Time frequency                         Unit of measure
1        Monthly Moving 12 months average rate of change
2        Monthly Moving 12 months average rate of change
3        Monthly Moving 12 months average rate of change
4        Monthly Moving 12 months average rate of change
  Classification of individual consumption by purpose (COICOP)
1                                               All-items HICP
2                                               All-items HICP
3                                               All-items HICP
4                                               All-items HICP
                                                                                   Geopolitical entity (reporting)
1 European Union (EU6-1958, EU9-1973, EU10-1981, EU12-1986, EU15-1995, EU25-2004, EU27-2007, EU28-2013, EU27-2020)
2 European Union (EU6-1958, EU9-1973, EU10-1981, EU12-1986, EU15-1995, EU25-2004, EU27-2007, EU28-2013, EU27-2020)
3                                                                                                           Norway
4                                                                                                           Norway
     Time freq         unit coicop geo    time value
1 2025-07    M RCH_MV12MAVR   CP00  EU 2025-07   2.4
2 2025-08    M RCH_MV12MAVR   CP00  EU 2025-08   2.4
3 2025-07    M RCH_MV12MAVR   CP00  NO 2025-07   2.4
4 2025-08    M RCH_MV12MAVR   CP00  NO 2025-08   2.5</code></pre>
</div>
<div class="section level2">
<h2 id="practical-example">Practical example<a class="anchor" aria-label="anchor" href="#practical-example"></a>
</h2>
<p>We would like to extract the number of female R&amp;D personel in the
services sector of the Norwegian business life for the years 2019 and
2020.</p>
<ol style="list-style-type: decimal">
<li><p>Locate the relevant table at <a href="https://www.ssb.no" class="external-link uri">https://www.ssb.no</a> that contains information on R&amp;D
personel. Having obtained the relevant table, table 07964, we create the
link <a href="https://data.ssb.no/api/v0/no/table/07964/" class="external-link uri">https://data.ssb.no/api/v0/no/table/07964/</a></p></li>
<li><p>Load the package.</p></li>
</ol>
<div class="sourceCode" id="cb44"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://statisticsnorway.github.io/ssb-pxwebapidata/" class="external-link">PxWebApiData</a></span><span class="op">)</span></span></code></pre></div>
<ol start="3" style="list-style-type: decimal">
<li>Check which variables that exist in the data.</li>
</ol>
<div class="sourceCode" id="cb45"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">variables</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ApiData.html">ApiData</a></span><span class="op">(</span><span class="st">"https://data.ssb.no/api/v0/no/table/07964/"</span>,</span>
<span>                     returnMetaFrames <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<pre><code>Warning converted to message: cannot open URL 'https://data.ssb.no/api/v0/no/table/07964/': HTTP status was '429 Unknown Error'</code></pre>
<pre><code>No internet connection or resource not available: Error in open.connection(con, "rb") : 
  cannot open the connection to 'https://data.ssb.no/api/v0/no/table/07964/'</code></pre>
<div class="sourceCode" id="cb48"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">variables</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="cn">NULL</span></span></code></pre>
<ol start="4" style="list-style-type: decimal">
<li>Check which values each variable contains.</li>
</ol>
<div class="sourceCode" id="cb50"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">values</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ApiData.html">ApiData</a></span><span class="op">(</span><span class="st">"https://data.ssb.no/api/v0/no/table/07964/"</span>,</span>
<span>                  returnMetaData <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<pre><code>Warning converted to message: cannot open URL 'https://data.ssb.no/api/v0/no/table/07964/': HTTP status was '429 Unknown Error'</code></pre>
<pre><code>No internet connection or resource not available: Error in open.connection(con, "rb") : 
  cannot open the connection to 'https://data.ssb.no/api/v0/no/table/07964/'</code></pre>
<div class="sourceCode" id="cb53"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">values</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="va">values</span></span></code></pre></div>
<pre><code><span><span class="cn">NULL</span></span></code></pre>
<div class="sourceCode" id="cb55"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">values</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="va">values</span></span></code></pre></div>
<pre><code><span><span class="cn">NULL</span></span></code></pre>
<div class="sourceCode" id="cb57"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">values</span><span class="op">[[</span><span class="fl">3</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="va">values</span></span></code></pre></div>
<pre><code><span><span class="cn">NULL</span></span></code></pre>
<ol start="5" style="list-style-type: decimal">
<li>Define these variables in the query to sort out the values we
want.</li>
</ol>
<div class="sourceCode" id="cb59"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mydata</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ApiData.html">ApiData</a></span><span class="op">(</span><span class="st">"https://data.ssb.no/api/v0/en/table/07964/"</span>,</span>
<span>                Tid <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"2021"</span>, <span class="st">"2022"</span><span class="op">)</span>, <span class="co"># Define year to 2021 and 2022</span></span>
<span>                NACE2007 <span class="op">=</span> <span class="st">"G-N"</span>, <span class="co"># Define the services sector</span></span>
<span>                ContentsCode <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"KvinneligFoUpers"</span><span class="op">)</span><span class="op">)</span> <span class="co"># Define women R&amp;D personell</span></span></code></pre></div>
<pre><code>Warning converted to message: cannot open URL 'https://data.ssb.no/api/v0/en/table/07964/': HTTP status was '429 Unknown Error'</code></pre>
<pre><code>No internet connection or resource not available: Error in open.connection(con, "rb") : 
  cannot open the connection to 'https://data.ssb.no/api/v0/en/table/07964/'</code></pre>
<div class="sourceCode" id="cb62"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mydata</span> <span class="op">&lt;-</span> <span class="va">mydata</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span> <span class="co"># Extract the first list element, which contains full variable names.</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">mydata</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="cn">NULL</span></span></code></pre>
<ol start="6" style="list-style-type: decimal">
<li>Show additional information.</li>
</ol>
<div class="sourceCode" id="cb64"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/comment.html" class="external-link">comment</a></span><span class="op">(</span><span class="va">mydata</span><span class="op">)</span></span></code></pre></div>
<pre><code>Warning in max(nchar(com)): no non-missing arguments to max; returning -Inf</code></pre>
</div>
<div class="section level2">
<h2 id="background">Background<a class="anchor" aria-label="anchor" href="#background"></a>
</h2>
<p>PxWeb and it’s API, PxWebApi is used as output database (Statbank) by
many statistical agencies in the Nordic countries and several others,
i.e. Statistics Norway, Statistics Finland, Statistics Sweden. See <a href="https://www.scb.se/en/services/statistical-programs-for-px-files/px-web/pxweb-examples/" class="external-link">list
of installations</a>.</p>
<p>For hints on using PxWebApi in general see <a href="https://www.ssb.no/en/api/pxwebapi/_/attachment/inline/3031ae43-a881-4ae6-b4c9-c04e190b1504:df8c31920354e37f30e21be5641df2d93a16ef6c/Api_user_manual.pdf" class="external-link">PxWebApi
User Guide</a>.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Øyvind Langsrud, Jan Bruusgaard.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
